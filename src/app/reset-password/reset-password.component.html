<ion-header>
  <ion-toolbar>
    <ion-title>Recuperar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="fade-in">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Recupera tu cuenta</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form (ngSubmit)="onResetPassword()" #resetForm="ngForm">
        <ion-item>
          <ion-label position="floating">Correo electrónico</ion-label>
          <ion-input 
            [(ngModel)]="email" 
            name="email" 
            type="email" 
            required
            #emailInput="ngModel"
          ></ion-input>
        </ion-item>
        <ion-item *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)">
          <ion-text color="danger">
            <p *ngIf="emailInput.errors?.['required']">El correo electrónico es obligatorio.</p>
            <p *ngIf="emailInput.errors?.['email']">Ingrese un correo electrónico válido.</p>
          </ion-text>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Palabra de seguridad</ion-label>
          <ion-input 
            [(ngModel)]="securityWord" 
            name="securityWord" 
            type="text" 
            required
            #securityWordInput="ngModel"
          ></ion-input>
        </ion-item>
        <ion-item *ngIf="securityWordInput.invalid && (securityWordInput.dirty || securityWordInput.touched)">
          <ion-text color="danger">
            <p *ngIf="securityWordInput.errors?.['required']">La palabra de seguridad es obligatoria.</p>
          </ion-text>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Nueva Contraseña</ion-label>
          <ion-input 
            [(ngModel)]="newPassword" 
            name="newPassword" 
            type="password" 
            required
            #newPasswordInput="ngModel"
          ></ion-input>
        </ion-item>
        <ion-item *ngIf="newPasswordInput.invalid && (newPasswordInput.dirty || newPasswordInput.touched)">
          <ion-text color="danger">
            <p *ngIf="newPasswordInput.errors?.['required']">La nueva contraseña es obligatoria.</p>
          </ion-text>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Repetir Contraseña</ion-label>
          <ion-input 
            [(ngModel)]="confirmPassword" 
            name="confirmPassword" 
            type="password" 
            required
            #confirmPasswordInput="ngModel"
          ></ion-input>
        </ion-item>
        <ion-item *ngIf="confirmPasswordInput.invalid && (confirmPasswordInput.dirty || confirmPasswordInput.touched)">
          <ion-text color="danger">
            <p *ngIf="confirmPasswordInput.errors?.['required']">Repetir la contraseña es obligatorio.</p>
          </ion-text>
        </ion-item>

        <ion-button 
          expand="full" 
          type="submit"
          [disabled]="resetForm.invalid || newPassword !== confirmPassword"
        >
          Restablecer Contraseña
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>
